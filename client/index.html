<html>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.1.1/socket.io.slim.js"></script>
  <script src="https://code.jquery.com/jquery-1.11.1.js"></script>
  <script>
    $(() => {
      var socket = io('http://localhost:3000');
      socket.on('init', (state) => {
        console.log({ state })
      })

      let ping = null
      setInterval(() => {
        if (ping === null) {
          ping = Date.now()
          socket.emit('my-ping', 'dummy')
        }
      }, 1000)
      socket.on('my-pong', () => {
        console.log(`ping is ${Date.now() - ping}`)
        ping = null
      })

      socket.on('disconnect', () => {
        ping = null
      })
    });
  </script>
</html>
